import io;
import strings;
import std;
import "result.hob" as result;

extern(open) fun internalOpen(path: *u8, mode: i32) -> i32;

public fun openWrite(path: string) -> result.Result.<io.Fd> {
    var allocatedPath = strings.fromString(path);
    defer allocatedPath.free();
    return result.newMapped.<io.Fd>(
        internalOpen(allocatedPath.makeCString(), 1),
        fun (value: i32) -> io.Fd {
            return value as io.Fd;
        }
    );
}
